<view class="container">
  <view class="header">
    <text class="title">Your Travel Plan</text>
    <text class="destination">{{destination}}</text>
    <text class="dates">{{departure_date}} - {{return_date}}</text>
  </view>

  <!-- Loading State -->
  <view class="loading-container" a:if="{{loading}}">
    <view class="spinner"></view>
    <text class="loading-text">Loading your itinerary...</text>
  </view>

  <!-- Error State -->
  <view class="error-container" a:if="{{error}}">
    <text class="error-text">{{error}}</text>
    <button class="retry-btn" onTap="onRetry">Try Again</button>
  </view>

  <!-- Itinerary Content -->
  <view class="content" a:if="{{!loading && !error && itinerary.length > 0}}">
    <view class="day-card" a:for="{{itinerary}}" a:key="{{item.id}}">
      <view class="day-header" onTap="onDayToggle" data-day-id="{{item.id}}">
        <view class="day-header-content">
          <text class="day-title">Day {{item.id}} - {{item.activitySummary}}</text>
          <text class="expand-icon" a:if="{{!expandedDays[item.id]}}">▼</text>
          <text class="expand-icon" a:if="{{expandedDays[item.id]}}">▲</text>
        </view>
        <text class="day-summary" a:if="{{!expandedDays[item.id]}}">Tap to expand</text>
      </view>
      
      <!-- Expandable Content -->
      <view class="day-content" a:if="{{expandedDays[item.id]}}">
        <!-- Time Activities -->
        <view class="time-section" a:for="{{item.time}}" a:for-item="timeSlot" a:key="{{index}}">
          <view class="time-slot">
            <view class="time-label">
              <text class="time-icon" a:if="{{timeSlot.period === 'morning'}}">🌅</text>
              <text class="time-icon" a:if="{{timeSlot.period === 'afternoon'}}">☀️</text>
              <text class="time-icon" a:if="{{timeSlot.period === 'evening'}}">🌙</text>
              <text class="time-text">{{timeSlot.period}}</text>
            </view>
            <view class="activity-card" onTap="onActivityTap" data-activity="{{timeSlot.activity}}" data-day="{{item.day}}">
              <text class="activity-text">{{timeSlot.activity}}</text>
              <text class="tap-hint">Tap for details</text>
            </view>
          </view>
        </view>

        <!-- Packing Items -->
        <view class="packing-section" a:if="{{item.packingItem && item.packingItem.length > 0}}">
          <text class="packing-title">Packing Items for {{item.day}}</text>
          <view class="packing-grid">
            <view class="packing-item" a:for="{{item.packingItem}}" a:key="{{index}}">
              <text class="packing-icon">🎒</text>
              <text class="packing-text">{{item}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- Empty State -->
  <view class="empty-container" a:if="{{!loading && !error && itinerary.length === 0}}">
    <text class="empty-text">No itinerary found</text>
    <button class="back-btn" onTap="onBack">Plan Another Trip</button>
  </view>

  <!-- Bottom Actions -->
  <view class="bottom-actions" a:if="{{!loading && !error && itinerary.length > 0}}">
    <button class="action-btn secondary" onTap="onBack">Plan New Trip</button>
    <button class="action-btn primary" onTap="onShare">Share Itinerary</button>
  </view>
</view>
